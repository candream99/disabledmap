<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë„¤ì´ë²„ ë²¡í„°ë§µ í…ŒìŠ¤íŠ¸ - ë¬´ì¥ì•  ì‹œì„¤ íŒì—… ìµœì¢…ë³¸</title>
    <style>
        /* ------------------------------------------------ */
        /* ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ì ê¸ˆ (ì¶”ê°€/ìˆ˜ì •) */
        /* ------------------------------------------------ */
        body { 
            margin: 0;
            padding: 0; 
            height: 100vh; /* ë·°í¬íŠ¸ ë†’ì´ë¡œ ê³ ì • */
            font-family: 'Malgun Gothic', sans-serif; 
            overflow: hidden; /* í˜ì´ì§€ ìì²´ì˜ ìŠ¤í¬ë¡¤ì„ ì™„ì „íˆ ë§‰ìŒ */
        }
        #map { width: 100%; height: 100%; }

        /* ------------------------------------------------ */
        /* ê²€ìƒ‰ì°½ ìŠ¤íƒ€ì¼ */
        /* ------------------------------------------------ */
        #searchBox {
            position: absolute;
            top: 20px; 
            left: 50%;
            transform: translateX(-50%);
            width: 80vw; 
            max-width: 500px; 
            height: 48px;
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
            z-index: 999; 
            display: flex;
            align-items: center;
            padding: 0 20px;
            pointer-events: none; /* ì§€ë„ê°€ ê²€ìƒ‰ì°½ ë’¤ì—ì„œ ì‘ë™í•˜ë„ë¡ ì„¤ì • */
        }
        /* ê²€ìƒ‰ì°½ ë‚´ë¶€ ìš”ì†ŒëŠ” í¬ì¸í„° ì´ë²¤íŠ¸ í—ˆìš© */
        #searchBox > * {
            pointer-events: auto;
        }
        #searchBox input {
            flex-grow: 1;
            border: none;
            outline: none;
            font-size: 16px;
            margin-right: 10px;
        }
        #searchBox button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            color: #123456;
        }

        /* ------------------------------------------------ */
        /* ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
        /* ------------------------------------------------ */
        .map-button {
            position: absolute;
            right: 20px; 
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background-color: #ffffff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #333;
            z-index: 900;
            transition: background-color 0.2s, box-shadow 0.2s;
        }
        .map-button:hover {
            background-color: #f0f0f0;
        }
        .map-button.active {
            box-shadow: 0 0 0 3px #4285f4;
        }
        
        /* ------------------------------------------------ */
        /* ê°œë³„ ë²„íŠ¼ ìœ„ì¹˜ */
        /* ------------------------------------------------ */
        #zoomInBtn { top: 100px; }
        #zoomOutBtn { top: 150px; }
        #outdoorIndoorBtn { top: 200px; }
        #accessBtn { bottom: 20px; } /* ë§¨ ì•„ë˜ ê³ ì • */
        
        /* ------------------------------------------------ */
        /* ë¬´ì¥ì•  ì‹œì„¤ì •ë³´ íŒì—… ìŠ¤íƒ€ì¼ (ìˆ˜ì •: bottom ê³ ì •) */
        /* ------------------------------------------------ */
        #accessPopup {
            position: absolute;
            bottom: 20px; /* í™”ë©´ í•˜ë‹¨ì— ê³ ì • */
            width: 300px;
            max-width: 90vw;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1050;
            padding: 15px;
            display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        }
        #accessPopup h3 {
            margin-top: 0;
            font-size: 18px;
            color: #123456;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        #accessPopup p {
            margin: 5px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        .popup-close-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
        }
        .popup-close-btn:hover {
            color: #333;
        }

    </style>
    <!-- ë„¤ì´ë²„ ì§€ë„ API ë¡œë“œ -->
    <!-- YOUR_CLIENT_IDë¥¼ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ IDë¡œ êµì²´í•˜ì„¸ìš”. -->
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=YOUR_CLIENT_ID&submodules=panorama,geocoder"></script>
</head>
<body>
    <div id="map"></div>
    <div id="searchBox">
        <button>ğŸ”</button>
        <input type="text" placeholder="ì¥ì†Œ ê²€ìƒ‰..." />
        <button>ğŸ¤</button>
    </div>

    <!-- ë²„íŠ¼ë“¤ -->
    <button id="zoomInBtn" class="map-button">+</button>
    <button id="zoomOutBtn" class="map-button">-</button>
    <button id="outdoorIndoorBtn" class="map-button">ğŸ </button>
    <button id="accessBtn" class="map-button">â„¹</button>

    <!-- ë¬´ì¥ì•  ì‹œì„¤ì •ë³´ íŒì—… -->
    <div id="accessPopup">
        <button class="popup-close-btn">âœ–</button>
        <h3>ë¬´ì¥ì•  ì‹œì„¤ ì •ë³´</h3>
        <p>íœ ì²´ì–´ ê²½ì‚¬ë¡œ: **ìˆìŒ**</p>
        <p>ì¥ì• ì¸ í™”ì¥ì‹¤: **ë³„ë„ ìœ„ì¹˜**</p>
        <p>ìœ ë„ ë¸”ë¡: **ì •ìƒ ì‘ë™**</p>
        <p>ì—˜ë¦¬ë² ì´í„°: **ì‘ë™ ì¤‘**</p>
    </div>

    <script>
        // ì´ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì€ 1201rev4.htmlì˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë³µì›í•œ ê²ƒì…ë‹ˆë‹¤.
        // í´ë¼ì´ì–¸íŠ¸ IDëŠ” ë°˜ë“œì‹œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤.
        const clientId = 'YOUR_CLIENT_ID'; 

        // ------------------------------------------------
        // ë„¤ì´ë²„ ì§€ë„ API ë¡œë“œ ë° ì´ˆê¸°í™”
        // ------------------------------------------------
        window.onload = function () {
            // ë„¤ì´ë²„ ì§€ë„ë¥¼ ì´ˆê¸°í™”í•˜ê³  'map' divì— ë Œë”ë§í•©ë‹ˆë‹¤.
            const map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(37.3595704, 127.105399), // ì´ˆê¸° ì¤‘ì‹¬ ì¢Œí‘œ (íŒêµì—­ ê·¼ì²˜)
                zoom: 15,
                mapTypeId: naver.maps.MapTypeId.NORMAL,
                logoControl: true,
                mapDataControl: true,
                zoomControl: true,
                scaleControl: true,
            });

            // coordDisplayëŠ” ì´ ë²„ì „ì—ëŠ” í¬í•¨ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
            // const coordDisplay = document.getElementById('coordDisplay');
            const accessBtn = document.getElementById('accessBtn');
            const popup = document.getElementById('accessPopup');
            const popupClose = popup.querySelector('.popup-close-btn');

            // 1. ì§€ë„ ì´ë™ ì‹œ ì¢Œí‘œ í‘œì‹œ ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ (ì´ ë²„ì „ì—ëŠ” coordDisplayê°€ ì—†ì–´ ì£¼ì„ ì²˜ë¦¬)
            /*
            naver.maps.Event.addListener(map, 'idle', function () {
                const center = map.getCenter();
                const indoorLevel = map.getIndoorLevel() || 'ì‹¤ì™¸';
                const mapType = map.getMapTypeId();
                
                // coordDisplay ì—…ë°ì´íŠ¸
                coordDisplay.innerHTML = `ìœ„ë„: ${center.lat().toFixed(5)}, ê²½ë„: ${center.lng().toFixed(5)} | ì¸µ: ${indoorLevel} | íƒ€ì…: ${mapType.replace('normal', 'ì¼ë°˜').replace('satellite', 'ìœ„ì„±')}`;
            });
            */

            // 2. ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ

            // ì˜ˆì‹œ: ì‹¤ë‚´ì™¸ ëª¨ë“œ ì „í™˜ ë²„íŠ¼
            const indoorOutdoorBtn = document.getElementById('outdoorIndoorBtn');
            indoorOutdoorBtn.addEventListener('click', function() {
                if (map.getMapTypeId() === naver.maps.MapTypeId.INDOOR) {
                    map.setMapTypeId(naver.maps.MapTypeId.NORMAL);
                    this.innerHTML = 'ğŸ '; // ì‹¤ë‚´ ë‹«ê¸°
                    console.log('ì‹¤ì™¸ ëª¨ë“œ ì „í™˜');
                } else {
                    // ì‹¤ë‚´ ëª¨ë“œë¡œ ì „í™˜ (ì˜ˆì‹œ ì¢Œí‘œì— ì‹¤ë‚´ ë§µì´ ìˆë‹¤ê³  ê°€ì •)
                    map.setMapTypeId(naver.maps.MapTypeId.INDOOR); 
                    this.innerHTML = 'ğŸ¢'; // ì‹¤ë‚´ ì—´ê¸°
                    console.log('ì‹¤ë‚´ ëª¨ë“œ ì „í™˜');
                }
            });

            // ì˜ˆì‹œ: í™•ëŒ€/ì¶•ì†Œ ë²„íŠ¼
            document.getElementById('zoomInBtn').addEventListener('click', function() {
                map.setZoom(map.getZoom() + 1, true);
            });
            document.getElementById('zoomOutBtn').addEventListener('click', function() {
                map.setZoom(map.getZoom() - 1, true);
            });

            // 3. ë¬´ì¥ì•  ì‹œì„¤ì •ë³´ íŒì—… í† ê¸€ ì´ë²¤íŠ¸ (ìˆ˜ì •ëœ íŒì—… ìœ„ì¹˜ ë¡œì§ í¬í•¨)
            accessBtn.addEventListener('click', function() {
                const isPopupVisible = popup.style.display === 'block';

                if (!isPopupVisible) {
                    // ië²„íŠ¼ì˜ í˜„ì¬ ìœ„ì¹˜ ê³„ì‚°
                    const buttonRect = accessBtn.getBoundingClientRect();
                    
                    // ê¸°ì¡´ (buttonRect.right + 20)ì—ì„œ 15px ì™¼ìª½ìœ¼ë¡œ ì´ë™ (ì´ + 5px)
                    const newPopupLeft = buttonRect.right + 5; 

                    // íŒì—… í•˜ë‹¨ì„ í™”ë©´ í•˜ë‹¨ì—ì„œ 20px ë„ì›Œ ê³ ì • (CSSì—ì„œ ì²˜ë¦¬)
                    // popup.style.bottom = '20px'; 
                    // íŒì—…ì˜ top ì†ì„±ì€ ì œê±°í•˜ê±°ë‚˜ ë¬´ì‹œë©ë‹ˆë‹¤.
                    
                    popup.style.left = newPopupLeft + 'px'; /* ìˆ˜ì •ëœ left ê°’ ì ìš© */
                    
                    // íŒì—… ì—´ê¸°
                    popup.style.display = 'block';
                    this.classList.add('active');
                } else {
                    // íŒì—… ë‹«ê¸°
                    popup.style.display = 'none';
                    this.classList.remove('active');
                }
            });

            // ë¬´ì¥ì•  ì‹œì„¤ì •ë³´ íŒì—… ë‹«ê¸° ì´ë²¤íŠ¸ (X ë²„íŠ¼ í´ë¦­)
            if (popupClose) {
                popupClose.onclick = function() {
                    popup.style.display = 'none';
                    accessBtn.classList.remove('active');
                };
            }
        };

    </script>
</body>
</html>
