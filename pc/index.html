<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë°ìŠ¤í¬íƒ‘ ì „ìš© ì§€ë„</title>
    <style>
        /* ì „ì²´ ë° ë ˆì´ì•„ì›ƒ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Malgun Gothic', sans-serif;
            overflow: hidden;
        }
        #container {
            display: flex; /* ê°€ë¡œ ë°°ì—´ ìœ ì§€ */
            width: 100vw;
            height: 100vh;
        }

/* [ìˆ˜ì •] ìµœì¢Œì¸¡ íŒ¨ë„: í°ìƒ‰ ë°°ê²½ìœ¼ë¡œ ë³€ê²½ ë° ê²½ê³„ì„  ì¶”ê°€ */
#gnb {
    width: 64px;
    height: 100%;
    background-color: #ffffff; /* í°ìƒ‰ ë°°ê²½ */
    border-right: 1px solid #e0e0e0; /* êµ¬ë¶„ì„  ì¶”ê°€ */
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
    z-index: 1100;
}

/* ë¡œê³  ì˜ì—­ ì»¤ì„œ ì¶”ê°€ */
.gnb-logo {
    padding: 20px 0;
    width: 100%;
    display: flex;
    justify-content: center;
    cursor: pointer; /* í´ë¦­ ê°€ëŠ¥í•˜ë‹¤ëŠ” í‘œì‹œ */
}

.gnb-logo img {
    width: 40px;
    height: auto;
}

/* [ìˆ˜ì •] ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë³€ê²½ (í°ìƒ‰ ë°°ê²½ì— ë§ì¶° ì–´ë‘¡ê²Œ) */
.gnb-btn {
    background: none;
    border: none;
    padding: 15px 0; /* íŒ¨ë”© ì¡°ì • */
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    transition: background 0.2s;
}

.gnb-btn:hover {
    background-color: #f5f5f5;
}

        /* [ì¶”ê°€] GNB ë²„íŠ¼ ë‚´ë¶€ ì´ë¯¸ì§€ ì•„ì´ì½˜ í¬ê¸° */
.gnb-btn img {
    width: 24px;  /* ì•„ì´ì½˜ í¬ê¸° (ì¡°ì ˆ ê°€ëŠ¥) */
    height: 24px;
    margin-bottom: 6px; /* í…ìŠ¤íŠ¸ì™€ì˜ ê°„ê²© */
    display: block;
}
        
.btn-text {
    font-size: 11px;
    font-weight: 600;
    color: #555;
}

        /* ì™¼ìª½ ì‚¬ì´ë“œë°”: ê¸°ì¡´ ë””ìì¸ ìœ ì§€ */
        #sidebar {
            width: 20%;
            min-width: 260px;
            max-width: 420px;
            height: 100%;
            box-sizing: border-box;
            background: #fafafa;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
        }

/* ê¸°ì—… ì†Œê°œ íŒ¨ë„ ìŠ¤íƒ€ì¼ */
#introPanel {
    position: absolute;
    left: 64px; /* GNB ë„ˆë¹„ë§Œí¼ ë„ì›€ */
    top: 0;
    width: 20%; /* ê²€ìƒ‰ íŒ¨ë„ê³¼ ë™ì¼í•œ ë¹„ìœ¨ */
    min-width: 260px;
    max-width: 420px;
    height: 100%;
    background: #ffffff;
    z-index: 1500; /* ì‚¬ì´ë“œë°”ë³´ë‹¤ ìœ„ì— ìœ„ì¹˜ */
    display: none; /* ì´ˆê¸° ìƒíƒœëŠ” ìˆ¨ê¹€ */
    flex-direction: column;
    box-shadow: 4px 0 15px rgba(0,0,0,0.1);
    border-right: 1px solid #e5e7eb;
    overflow-y: auto;
    padding: 60px 24px 40px 24px;
    box-sizing: border-box;
}

/* ë‹«ê¸° ë²„íŠ¼ (X) */
#closeIntroBtn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    font-size: 32px;
    font-weight: 300;
    color: #999;
    cursor: pointer;
    line-height: 1;
}

#closeIntroBtn:hover {
    color: #333;
}

.intro-content {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.intro-logo {
    width: 160px;
    height: auto;
    margin-bottom: 40px;
}

.intro-title {
    font-size: 22px;
    font-weight: 800;
    line-height: 1.4;
    color: #111;
    margin-bottom: 24px;
    word-break: keep-all;
    text-align: left;
    width: 100%;
}

.intro-body {
    font-size: 15px;
    line-height: 1.8;
    color: #444;
    text-align: justify;
}

.intro-body p {
    margin-bottom: 20px;
}
        
        /* ê²€ìƒ‰ì˜ì—­ */
        #searchArea {
            padding: 14px;
            border-bottom: 1px solid #eee;
            background: #fff;
        }
#searchInput {
    width: 100%;
    height: 42px;
    padding: 0 12px;
    border-radius: 8px;
    border: 3px solid #444; /* ê¸°ì¡´ 1px -> 3px, ìƒ‰ìƒ ì§„íšŒìƒ‰ */
    font-size: 15px;
    box-sizing: border-box;
    font-weight: bold; /* í…Œë‘ë¦¬ì— ë§ì¶° ê¸€ì”¨ë„ ì•½ê°„ ê°•ì¡° */
}

        #buildingList {
            padding: 10px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            flex: 1 1 auto;
        }

        .building-card {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            padding: 10px;
            border-radius: 8px;
            background: white;
            margin-bottom: 10px;
            cursor: pointer;
            border: 1px solid #f0f0f0;
            transition: box-shadow .12s, transform .08s;
        }
        .building-card:hover {
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }
        .building-thumb {
            width: 72px;
            height: 72px;
            object-fit: cover;
            border-radius: 6px;
            flex-shrink: 0;
            background: #f3f4f6;
        }
        .building-info {
            flex: 1 1 auto;
        }
        .building-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 6px;
            color: #111827;
        }
        .building-meta {
            font-size: 13px;
            color: #6b7280;
            line-height: 1.25;
        }

        /* ì‹¤ë‚´ëª¨ë“œ ì •ë³´ íŒ¨ë„ */
        #indoorInfoPanel {
            padding: 14px;
            display: none;
            overflow-y: auto;
        }
        #indoorInfoPanel img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        #indoorInfoPanel .title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 8px;
            color: #111827;
        }
        #indoorInfoPanel .meta {
            font-size: 14px;
            color: #444;
            margin-bottom: 4px;
        }
        #indoorInfoPanel .section-title {
            margin-top: 18px;
            font-weight: 700;
            font-size: 15px;
            color: #1f2e6a;
            margin-bottom: 8px;
        }
        #indoorInfoPanel .facility-item {
            font-size: 14px;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        /* ì˜¤ë¥¸ìª½ ì§€ë„ ì˜ì—­: ê¸°ì¡´ ë””ìì¸ ìœ ì§€ ë° ë‚¨ì€ ê³µê°„ ì°¨ì§€ */
        #mapContainer {
            flex-grow: 1; 
            height: 100%;
            position: relative;
        }
        #map {
            width: 100%;
            height: 100%;
        }

        /* coordDisplay */
        #coordDisplay {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2500;
            background: rgba(255,255,255,0.95);
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            font-size: 14px;
            color: #111827;
            white-space: nowrap;
            max-width: 66%;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            align-items: center;
        }

        /* ì§€ë„ ìœ„ ë²„íŠ¼ */
        .map-btn-circle {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #ffffff;
            border: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.12);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2200;
        }
        #geolocationBtn {
            position: absolute;
            bottom: 18px;
            left: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: #fff;
            border: 1px solid #ccc;
        }

        #geolocationBtn .geo-icon {
            display: block;
            width: 18px;
            height: 18px;
            border: 2px solid #333; 
            border-radius: 50%;
            position: relative;
            box-sizing: border-box;
        }

        #geolocationBtn .geo-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
            background-color: #333; 
            border-radius: 50%;
        }

        #geolocationBtn.active .geo-icon {
            border: none;
            background-color: transparent;
            width: 0; height: 0;
            transform: rotate(-45deg);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 12px solid #007bff;
        }

        #geolocationBtn.active .geo-icon::after { content: none; }

/* [ìˆ˜ì •] ì¸µìˆ˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ì—­ */
#floorControls {
    position: absolute;
    bottom: 86px;
    left: 18px;
    display: none; /* ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ flexë¡œ ë³€ê²½í•˜ì—¬ í‘œì‹œí•¨ */
    flex-direction: column; /* ë²„íŠ¼ì„ ì„¸ë¡œë¡œ ë‚˜ì—´ */
    gap: 10px;
    z-index: 2200;
}

/* [ì¶”ê°€] ì¸µìˆ˜ ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ (ì´ ë¶€ë¶„ì´ ì—†ìœ¼ë©´ ë²„íŠ¼ì´ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤) */
.floor-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: #ffffff; /* ê¸°ë³¸ ë°°ê²½ í°ìƒ‰ */
    border: 1px solid #d0d0d0; /* ì—°í•œ í…Œë‘ë¦¬ */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    color: #444;
    transition: all 0.2s ease;
}

/* ë²„íŠ¼ ë§ˆìš°ìŠ¤ ì˜¤ë²„ íš¨ê³¼ */
.floor-btn:hover {
    background-color: #f7f7f7;
    transform: scale(1.05);
}

/* [ìˆ˜ì •] í™œì„±í™”ëœ ì¸µìˆ˜ ë²„íŠ¼ (ìš”ì²­í•˜ì‹  íŒŒë€ìƒ‰ ìŠ¤íƒ€ì¼) */
.floor-btn.active {
    background-color: #007bff !important; /* ì„ ëª…í•œ íŒŒë€ìƒ‰ */
    color: #ffffff !important;           /* í°ìƒ‰ ê¸€ì”¨ */
    font-weight: 800 !important;         /* êµµê²Œ */
    border: none;                        /* í…Œë‘ë¦¬ ì œê±° */
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.4); /* íŒŒë€ìƒ‰ ê·¸ë¦¼ì */
    transform: scale(1.1);               /* ì•½ê°„ ì»¤ì§ */
}

        /* ë°˜ì‘í˜• ìµœì†Œí™” */
        @media (max-width: 920px) {
            #sidebar { display: none; }
        }
        /* [ì¶”ê°€] ì§€í•˜ì²  ë…¸ì„ ë„ íŒì—… ìŠ¤íƒ€ì¼ */
    #subwayPopup {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 3000;
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        max-width: 90%;
        max-height: 90%;
        overflow: auto;
    }

    /* íŒì—… ë‹«ê¸° ë²„íŠ¼ */
    #closeSubwayBtn {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 28px;
        font-weight: bold;
        color: #555;
        background: none;
        border: none;
        cursor: pointer;
        z-index: 1;
    }

    #closeSubwayBtn:hover { color: #000; }

    /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ë° ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    .subway-map-container {
        margin-top: 20px;
        display: flex;
        justify-content: center;
    }

    .subway-map-container img {
        max-width: 100%;
        height: auto;
        display: block;
        border: 1px solid #eee;
    }

    /* â–²â–²â–² ë¶™ì—¬ë„£ê¸° ë â–²â–²â–² */
    </style>
</head>

<body>
<div id="container">

<nav id="gnb">
    <div class="gnb-logo" id="mainLogoBtn">
        <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/name2.png" alt="ë¡œê³ ">
    </div>
    
    <div class="gnb-menu">
        <button class="gnb-btn" id="introBtn">
            <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/information.png" alt="ì†Œê°œ ì•„ì´ì½˜">
            <span class="btn-text">ì†Œê°œ</span>
        </button>
<button class="gnb-btn" id="subwayBtn">
    <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/subway.png" alt="ì§€í•˜ì²  ì•„ì´ì½˜">
    <span class="btn-text">ì§€í•˜ì² </span>
</button>
        <button class="gnb-btn">
            <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/document.jpg" alt="ì•½ê´€ ì•„ì´ì½˜">
            <span class="btn-text">ì´ìš©ì•½ê´€</span>
        </button>
    </div>
</nav>

    <aside id="sidebar">
        <div id="searchArea">
            <input id="searchInput" type="text" placeholder="ê²€ìƒ‰â€¦">
        </div>
        <div id="buildingList"></div>
        <div id="indoorInfoPanel"></div>
    </aside>

<div id="introPanel">
    <button id="closeIntroBtn">&times;</button>
    <div class="intro-content">
        <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/wm.png" alt="ì›”ë“œë©”ë”” ë¡œê³ " class="intro-logo">
        <h2 class="intro-title">ëª¨ë‘ë¥¼ ìœ„í•œ ê³µê°„ì˜ ì—°ê²°, ì›”ë“œë©”ë”” 'ë¬´ì¥ì• ì§€ë„'</h2>
        <div class="intro-body">
            <p>2026ë…„ í˜„ì¬ ëŒ€í•œë¯¼êµ­ íœ ì²´ì–´ ì´ìš©ìëŠ” 30ë§Œ ëª…ì— ìœ¡ë°•í•˜ë©°, ê³ ë ¹ ì¸êµ¬ 1,000ë§Œ ëª… ì‹œëŒ€ì— ì§„ì…í•¨ì— ë”°ë¼ ë³´í–‰ ë³´ì¡°ê¸° ì‚¬ìš©ì ìˆ˜ëŠ” ê¸‰ê²©íˆ ëŠ˜ì–´ë‚  ì „ë§ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ëŒ€í˜•í™”ë˜ê³  ë³µì¡í•´ì§€ëŠ” í˜„ëŒ€ì˜ ê±´ì¶•ë¬¼ì€ ë³´í–‰ ì•½ìë“¤ì—ê²Œ ê±°ëŒ€í•œ ì¥ë²½ê³¼ ê°™ìŠµë‹ˆë‹¤. ì›”ë“œë©”ë””ëŠ” ì´ëŸ¬í•œ ì‚¬íšŒì  ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ëª¨ë“  ì´ì˜ í‰ë“±í•œ ì´ë™ê¶Œì„ ë³´ì¥í•˜ê¸° ìœ„í•´ í˜ì‹ ì ì¸ 'ë¬´ì¥ì• ì§€ë„' ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            <p>ë‹¨ìˆœí•œ ì§€ë„ë¥¼ ë„˜ì–´ ê³µê°„ì˜ ë¯¼ì£¼í™”ë¥¼ ì§€í–¥í•˜ëŠ” ì›”ë“œë©”ë””ì˜ ì‹¤ë‚´ ì§€ë„ëŠ” ë³µì¡í•œ ê±´ë¬¼ ë‚´ë¶€ ì •ë³´ë¥¼ ëª¨ë°”ì¼ê³¼ ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ ì§ê´€ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤. ì§€ì†ì ì¸ ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ê°€ì¥ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²½ë¡œë¥¼ ì•ˆë‚´í•˜ë©°, ê³µê³µê¸°ê´€ë¶€í„° ë¯¼ê°„ ëŒ€í˜• ì‹œì„¤ê¹Œì§€ ì„œë¹„ìŠ¤ ì˜ì—­ì„ í™•ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ ì¥ì•  ì—†ì´ ììœ ë¡­ê²Œ ê³µê°„ì„ ëˆ„ë¦´ ìˆ˜ ìˆëŠ” ì„¸ìƒ, ì›”ë“œë©”ë””ê°€ ì‹¤ë‚´ ì§€ë„ë¥¼ í†µí•´ ì‹¤í˜„í•´ ë‚˜ê°€ëŠ” í•µì‹¬ ê°€ì¹˜ì…ë‹ˆë‹¤.</p>
        </div>
    </div>
</div>

    <section id="mapContainer">
        <div id="map"></div>
        <div id="coordDisplay">ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”</div>
        <button id="geolocationBtn" class="map-btn-circle">
            <span class="geo-icon"></span>
        </button>
        <div id="floorControls"></div>

        <div id="subwayPopup">
        <button id="closeSubwayBtn">&times;</button>
        <div class="subway-map-container">
            <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/subway_.png" alt="ì§€í•˜ì²  ë…¸ì„ ë„">
        </div>
    </div>
    </section>

</div>

<script>
/* ê¸°ì¡´ JavaScript ë¡œì§ ì „ì²´ ë³µì‚¬ (ë°ì´í„° í¬í•¨) */
var NCP_KEY_ID = "q1d23mmkof";
var script = document.createElement("script");
script.src = "https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId="+NCP_KEY_ID+"&vmode=3";

script.onload = function() {

    /* DOM */
    const searchArea = document.getElementById("searchArea");
    const buildingList = document.getElementById("buildingList");
    const searchInput = document.getElementById("searchInput");
    const indoorInfoPanel = document.getElementById("indoorInfoPanel");

    const floorControls = document.getElementById("floorControls");
    const coordDisplay = document.getElementById("coordDisplay");
    const geolocationBtn = document.getElementById("geolocationBtn");
    const introBtn = document.getElementById("introBtn");
    const introPanel = document.getElementById("introPanel");
    const closeIntroBtn = document.getElementById("closeIntroBtn");
    const subwayBtn = document.getElementById("subwayBtn");
    const subwayPopup = document.getElementById("subwayPopup");
    const closeSubwayBtn = document.getElementById("closeSubwayBtn");

    /* ì§€ë„ ìƒì„± */
    var map = new naver.maps.Map("map", {
        center: new naver.maps.LatLng(37.5710, 126.9784),
        zoom: 17,
        zoomControl: false,
        mapTypes: new naver.maps.MapTypeRegistry({
            normal: naver.maps.NaverStyleMapTypeOptions.getVectorMap(),
        }),
    });
    var labelLayer = new naver.maps.LabelLayer();
    labelLayer.setMap(map);

    var groundOverlay = null;
    var currentBuildingId = null;
    var currentPositionMarker = null;

    /* ì‹¤ë‚´ëª¨ë“œ ì‹œ ì™¼ìª½ íŒ¨ë„ì„ ì •ë³´ íŒ¨ë„ë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ */
    function showIndoorInfo(buildingId) {
        const b = buildings[buildingId];
        indoorInfoPanel.innerHTML = `
            <img src="${b.buildingInfo.image_url}">
            <div class="title">${b.buildingInfo.name}</div>
            <div class="meta">ğŸ ï¸ ${b.buildingInfo.address}</div>
            <div class="meta">â—´ ${b.buildingInfo.operating_hours}</div>
            <div class="section-title">ë¬´ì¥ì•  ì‹œì„¤ ì •ë³´</div>
            ${Object.entries(b.accessInfo).map(([k,v]) => `
                <div class="facility-item"><span>â€¢ ${k}</span><span>${v?'ìˆìŒ':'ì—†ìŒ'}</span></div>
            `).join("")}
        `;
    }

    /* ì‹¤ë‚´ëª¨ë“œ ì§„ì… */
    function enterIndoorMode(buildingId){
        currentBuildingId = buildingId;
        searchArea.style.display = "none";
        buildingList.style.display = "none";
        indoorInfoPanel.style.display = "block";
        showIndoorInfo(buildingId);

        const config = buildings[buildingId];
        const bounds = new naver.maps.LatLngBounds();
        config.polygonCoords.forEach(c=>bounds.extend(c));
        map.setCenter(bounds.getCenter());
        map.setZoom(19);

        labelLayer.setMap(null);
        coordDisplay.textContent = "ì¼ë°˜ì§€ë„ë¡œ ëŒì•„ê°€ë ¤ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ í´ë¦­í•˜ì„¸ìš”";
        renderFloorButtons(buildingId);
        floorControls.style.display = "flex";
        showFloor(buildingId, config.currentFloor || "1f");

        for (let id in buildings){
            if (id !== buildingId && buildings[id].polygon){
                buildings[id].polygon.setMap(null);
            }
        }
    }

    /* ì‹¤ë‚´ëª¨ë“œ ì¢…ë£Œ */
    function exitIndoorMode(){
        if (!currentBuildingId) return;
        if (groundOverlay) groundOverlay.setMap(null);
        labelLayer.setMap(map);
        currentBuildingId = null;
        searchArea.style.display = "block";
        buildingList.style.display = "block";
        indoorInfoPanel.style.display = "none";
        floorControls.style.display = "none";
        coordDisplay.textContent = "ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”";
        for (let id in buildings){
            if (buildings[id].polygon){
                buildings[id].polygon.setMap(map);
                buildings[id].polygon.setOptions({ fillColor:"transparent" });
            }
        }
    }

    function showFloor(buildingId, floor){
        const b = buildings[buildingId];
        if (groundOverlay) groundOverlay.setMap(null);
        const img = b.images[floor];
        const bound = b.floorBounds[floor];
        groundOverlay = new naver.maps.GroundOverlay(img, bound, {
            map: map, clickable: true, opacity: 1
        });
        b.currentFloor = floor;
        document.querySelectorAll("#floorControls .floor-btn").forEach(btn=>{
            btn.classList.remove("active");
        });
        const btn = document.querySelector(`#floorControls .floor-btn[data-floor="${floor}"]`);
        if (btn) btn.classList.add("active");
        naver.maps.Event.addListener(groundOverlay,"click",(e)=>{
            e.stopOverlays = true;
            exitIndoorMode();
        });
    }

    function renderFloorButtons(buildingId){
        floorControls.innerHTML = "";
        const b = buildings[buildingId];
        b.floors.forEach(f=>{
            const btn = document.createElement("button");
            btn.className = "floor-btn map-btn-circle";
            btn.dataset.floor = f;
            btn.textContent = f.toUpperCase();
            btn.addEventListener("click", ()=> showFloor(buildingId,f));
            floorControls.prepend(btn);
        });
    }

    /* ì§€ì˜¤ë¡œì¼€ì´ì…˜ */
    geolocationBtn.addEventListener("click",function(){
        if (this.classList.contains("active")){
            if (currentPositionMarker) currentPositionMarker.setMap(null);
            this.classList.remove("active");
            return;
        }
        if (navigator.geolocation){
            navigator.geolocation.getCurrentPosition(pos=>{
                const c = new naver.maps.LatLng(pos.coords.latitude,pos.coords.longitude);
                map.setCenter(c);
                map.setZoom(17);
                if (currentPositionMarker) currentPositionMarker.setMap(null);
                currentPositionMarker = new naver.maps.Marker({ map: map, position: c });
                geolocationBtn.classList.add("active");
            });
        }
    });

   /* ë¹Œë”© ë°ì´í„° ì •ì˜ (ì „ì²´ í†µí•©) */
    const buildings = {
        ky: { // êµë³´ë¹Œë”©
            buildingInfo: {
                name: "êµë³´ë¹Œë”©",
                image_url: "https://raw.githubusercontent.com/candream99/disabledmap/main/kb/kyobo_gwanghwamun.jpg",
                address: "ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 1",
                operating_hours: "09:00 - 18:00"
            },
            accessInfo: {"ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ":true,"ì¥ì• ì¸ í™”ì¥ì‹¤":false,"ì¥ì• ì¸ ì£¼ì°¨ì¥":true,"ì—˜ë¦¬ë² ì´í„°":true,"ì£¼ì¶œì…êµ¬ ë‹¨ì°¨":false},
            floors: ["b1","1f","2f"], currentFloor: "1f",
            images: {"b1":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/kb_b111.png","1f":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/ky11.png","2f":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/ky_1.jpg"},
            floorBounds: {
                "b1":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.571590,126.978531),new naver.maps.LatLng(37.570465,126.977552)),
                "1f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570512,126.977632),new naver.maps.LatLng(37.571415,126.978244)),
                "2f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570512,126.977632),new naver.maps.LatLng(37.571415,126.978244)),
            },
            polygonCoords:[new naver.maps.LatLng(37.571350,126.977670),new naver.maps.LatLng(37.571360,126.978059),new naver.maps.LatLng(37.571275,126.978063),new naver.maps.LatLng(37.571275,126.978173),new naver.maps.LatLng(37.570870,126.978184),new naver.maps.LatLng(37.570872,126.978082),new naver.maps.LatLng(37.570543,126.978094),new naver.maps.LatLng(37.570539,126.977702)]
        },
        dt: { // ê´‘í™”ë¬¸ Díƒ€ì›Œ
            buildingInfo:{name:'ê´‘í™”ë¬¸ Díƒ€ì›Œ',image_url:'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/d_tower.jpg',address:'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ3ê¸¸ 17',operating_hours:'10:00 - 21:00'},
            accessInfo:{'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ':false,'ì¥ì• ì¸ í™”ì¥ì‹¤':true,'ì¥ì• ì¸ ì£¼ì°¨ì¥':false,'ì—˜ë¦¬ë² ì´í„°':true,'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨':true},
            floors:['b4','1f'], currentFloor:'1f',
            images:{'b4':'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/dt_b4.png','1f':'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/dt1.png'},
            floorBounds:{"b4":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570459,126.978649),new naver.maps.LatLng(37.571626,126.979210)),"1f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570459,126.978649),new naver.maps.LatLng(37.571626,126.979210))},
            polygonCoords:[new naver.maps.LatLng(37.571470,126.978762),new naver.maps.LatLng(37.571476,126.979161),new naver.maps.LatLng(37.570627,126.979181),new naver.maps.LatLng(37.570557,126.979117),new naver.maps.LatLng(37.570553,126.978777)]
        },
        t8: { // íƒ€ì›Œ8
            polygonCoords: [
                new naver.maps.LatLng(37.570859, 126.980318),
                new naver.maps.LatLng(37.570854, 126.980784),
                new naver.maps.LatLng(37.570515, 126.980785),
                new naver.maps.LatLng(37.570514, 126.980841),
                new naver.maps.LatLng(37.570417, 126.980840),
                new naver.maps.LatLng(37.570418, 126.980288),
                new naver.maps.LatLng(37.570518, 126.980287),
                new naver.maps.LatLng(37.570518, 126.980315),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_b2.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': true, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'íƒ€ì›Œ8',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/t88.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ5ê¸¸ 7',
                operating_hours: '09:00 - 22:00 (ì£¼ë§ í¬í•¨)'
            }
        },
        dp: { // ë•ìˆ˜ê¶ ë””íŒ°ë¦¬ìŠ¤
            polygonCoords: [
                new naver.maps.LatLng(37.568747, 126.971657),
                new naver.maps.LatLng(37.568764, 126.971716),
                new naver.maps.LatLng(37.568785, 126.971707),
                new naver.maps.LatLng(37.568924, 126.972264),
                new naver.maps.LatLng(37.568905, 126.972278),
                new naver.maps.LatLng(37.568918, 126.972331),
                new naver.maps.LatLng(37.568654, 126.972437),
                new naver.maps.LatLng(37.568638, 126.972382),
                new naver.maps.LatLng(37.568619, 126.972390),
                new naver.maps.LatLng(37.568479, 126.971828),
                new naver.maps.LatLng(37.568501, 126.971818),
                new naver.maps.LatLng(37.568483, 126.971760),
            ],
            floors: ['1f', 'b1', 'b3'],
            images: {
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_2.png',
                'b3': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_3.png',
            },
            floorBounds: { 
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568384, 126.971603), new naver.maps.LatLng(37.569001, 126.972464)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568245, 126.971606), new naver.maps.LatLng(37.569161, 126.972561)),
                'b3': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568245, 126.971606), new naver.maps.LatLng(37.569161, 126.972561)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': true, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'ë•ìˆ˜ê¶ ë””íŒ°ë¦¬ìŠ¤',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp.png',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ2ê¸¸ 10',
                operating_hours: '09:00 - 21:00 (ë§¤ì¼ ìš´ì˜)'
            }
        },
        officia: { // ê´‘í™”ë¬¸ ì˜¤í”¼ì‹œì•„
            polygonCoords: [
                new naver.maps.LatLng(37.569884, 126.974610),
                new naver.maps.LatLng(37.569882, 126.975265),
                new naver.maps.LatLng(37.569580, 126.975261),
                new naver.maps.LatLng(37.569581, 126.974603),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_b1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_1f.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'ê´‘í™”ë¬¸ ì˜¤í”¼ì‹œì•„',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_.jpg',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ 92',
                operating_hours: '10:00 - 21:00 (ì£¼ë§ íœ´ë¬´, ì„ì˜)'
            }
        },
        st: { // Síƒ€ì›Œ
            polygonCoords: [
                new naver.maps.LatLng(37.569910, 126.973684),
                new naver.maps.LatLng(37.569904, 126.974217),
                new naver.maps.LatLng(37.569688, 126.974214),
                new naver.maps.LatLng(37.569688, 126.973680),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_b1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'Síƒ€ì›Œ',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/s_t.jpg',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ 82',
                operating_hours: 'í‰ì¼ 09:00 - 21:00 (ì„ì˜)'
            }
        },
        yp: { // ì˜í’ë¹Œë”©
            polygonCoords: [
                new naver.maps.LatLng(37.569881, 126.981938),
                new naver.maps.LatLng(37.569879, 126.982329),
                new naver.maps.LatLng(37.569829, 126.982332),
                new naver.maps.LatLng(37.569828, 126.982395),
                new naver.maps.LatLng(37.569780, 126.982395),
                new naver.maps.LatLng(37.569777, 126.982463),
                new naver.maps.LatLng(37.569463, 126.982461),
                new naver.maps.LatLng(37.569462, 126.982068),
                new naver.maps.LatLng(37.569565, 126.981938),
            ],
            floors: ['b1', '1f'],
            images: {
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp1.png',
            },
            floorBounds: { 
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569438, 126.981870), new naver.maps.LatLng(37.569943, 126.982556)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569438, 126.981870), new naver.maps.LatLng(37.569943, 126.982556)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': true},
            buildingInfo: { 
                name: 'ì˜í’ë¹Œë”©', 
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp_i.jpg', 
                address: 'ì„œìš¸ ì¢…ë¡œêµ¬ ì²­ê³„ì²œë¡œ 41', 
                operating_hours: '09:00 - 22:00'
            }
        },
        sc: { // SCì œì¼ì€í–‰
            polygonCoords: [
                new naver.maps.LatLng(37.571274, 126.982109),
                new naver.maps.LatLng(37.571257, 126.982778),
                new naver.maps.LatLng(37.570935, 126.982765),
                new naver.maps.LatLng(37.570934, 126.982725),
                new naver.maps.LatLng(37.570863, 126.982721),
                new naver.maps.LatLng(37.570672, 126.982456),
                new naver.maps.LatLng(37.570674, 126.982384),
                new naver.maps.LatLng(37.570612, 126.982302),
                new naver.maps.LatLng(37.570616, 126.982153),
                new naver.maps.LatLng(37.570712, 126.982050),
                new naver.maps.LatLng(37.570974, 126.982058),
                new naver.maps.LatLng(37.570969, 126.982094),
            ],
            floors: ['b1', '1f'],
            images: {
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_1.png',
            },
            floorBounds: { 
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570605, 126.981884), new naver.maps.LatLng(37.571639, 126.982899)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570605, 126.981884), new naver.maps.LatLng(37.571639, 126.982899)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: { 
                name: 'SCì œì¼ì€í–‰', 
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_i.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 47', 
                operating_hours: '09:00 - 16:30'
            }
        },
        ks: { // í•œêµ­ë¬´ì—­ë³´í—˜ê³µì‚¬
            polygonCoords: [
                new naver.maps.LatLng(37.569913, 126.978610),
                new naver.maps.LatLng(37.569910, 126.979151),
                new naver.maps.LatLng(37.569719, 126.979148),
                new naver.maps.LatLng(37.569722, 126.978609) 
            ],
            floors: ['b2', 'b1', '1f'], 
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_b12.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_b11.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569583, 126.978495), new naver.maps.LatLng(37.570013, 126.979220)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569583, 126.978495), new naver.maps.LatLng(37.570013, 126.979220)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569618, 126.978522), new naver.maps.LatLng(37.570012, 126.979214)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': true},
            buildingInfo: {
                name: 'í•œêµ­ë¬´ì—­ë³´í—˜ê³µì‚¬',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 14',
                operating_hours: '09:00 - 18:00'
            }
        }
    };
    /* í´ë¦¬ê³¤ ìƒì„± ë¡œì§ */
    for (let id in buildings) {
        const b = buildings[id];
        b.polygon = new naver.maps.Polygon({
            map: map,
            paths: b.polygonCoords,
            fillColor: "transparent",
            fillOpacity: 0.3,
            strokeColor: "#1f2e6a",
            strokeOpacity: 0.6,
            strokeWeight: 3,
            clickable: true
        });
        naver.maps.Event.addListener(b.polygon, "click", () => enterIndoorMode(id));
        naver.maps.Event.addListener(b.polygon, "mouseover", () => b.polygon.setOptions({ fillColor: "#1f2e6a" }));
        naver.maps.Event.addListener(b.polygon, "mouseout", () => b.polygon.setOptions({ fillColor: "transparent" }));
    }

    /* ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ */
function renderList(q) {
    const arr = Object.keys(buildings).map(id => ({ id, info: buildings[id].buildingInfo }));
    buildingList.innerHTML = arr.filter(x => {
        if (!q) return true;
        return x.info.name.toLowerCase().includes(q.toLowerCase());
    }).map(x => `
        <div class="building-card" data-id="${x.id}">
            <img class="building-thumb" src="${x.info.image_url}">
            <div class="building-info">
                <div class="building-name">${x.info.name}</div>
                <div class="building-meta">ğŸ ï¸ ${x.info.address}</div>
                <div class="building-meta">â—´ ${x.info.operating_hours}</div>
            </div>
        </div>
    `).join("");

    document.querySelectorAll(".building-card").forEach(el => {
        el.onclick = () => enterIndoorMode(el.dataset.id);
    });
}

    renderList("");
    searchInput.oninput = () => renderList(searchInput.value);
// 1. ì†Œê°œ ë²„íŠ¼ í´ë¦­ ì‹œ íŒ¨ë„ ì—´ê¸°
    introBtn.onclick = () => {
        introPanel.style.display = "flex";
    };

    // 2. X ë²„íŠ¼ í´ë¦­ ì‹œ íŒ¨ë„ ë‹«ê¸°
    closeIntroBtn.onclick = () => {
        introPanel.style.display = "none";
    };
/* [í†µí•©] ë©”ì¸ ë¡œê³  í´ë¦­ ì‹œ: ì†Œê°œì°½ ë‹«ê¸° + ì§€ë„ ì´ˆê¸°í™” */
    document.getElementById("mainLogoBtn").addEventListener("click", function() {
        // 1. ì†Œê°œì°½ì´ ì—´ë ¤ìˆë‹¤ë©´ ë‹«ê¸°
        introPanel.style.display = "none";

        // 2. ì‹¤ë‚´ ëª¨ë“œë¼ë©´ ë¹ ì ¸ë‚˜ì˜¤ê¸°
        if (currentBuildingId) {
            exitIndoorMode();
        }

        // 3. ê²€ìƒ‰ì°½ ì´ˆê¸°í™” ë° ë¦¬ìŠ¤íŠ¸ ì „ì²´ ë³´ê¸°
        searchInput.value = "";
        renderList("");

        // 4. ì§€ë„ ì‹œì ì„ ì´ˆê¸° ìœ„ì¹˜ë¡œ ì´ë™ (ì„œìš¸ ì¤‘ì‹¬)
        map.setCenter(new naver.maps.LatLng(37.5710, 126.9784));
        map.setZoom(17);
        
        // 5. ì¢Œí‘œ ì•ˆë‚´ ë¬¸êµ¬ ì´ˆê¸°í™”
        coordDisplay.textContent = "ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”";
        
        // 6. ìê¸° ìœ„ì¹˜ í‘œì‹œ ë§ˆì»¤ ì œê±°
        if (currentPositionMarker) {
            currentPositionMarker.setMap(null);
            currentPositionMarker = null;
            geolocationBtn.classList.remove("active");
        }
    });
    

    /* â–²â–²â–²â–²â–² ë¶™ì—¬ë„£ê¸° ë â–²â–²â–²â–²â–² */
    // 1. ì§€í•˜ì²  ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
    subwayBtn.addEventListener("click", () => {
        subwayPopup.style.display = "block";
    });

    // 2. ë‹«ê¸°(X) ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
    closeSubwayBtn.addEventListener("click", () => {
        subwayPopup.style.display = "none";
    });

    // 3. (ì„ íƒì‚¬í•­) íŒì—… ë°”ê¹¥ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸° ê¸°ëŠ¥ ì¶”ê°€
    // #mapContainerì— í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ê±¸ì–´ íŒì—… ë°”ê¹¥ í´ë¦­ì„ ê°ì§€í•©ë‹ˆë‹¤.
    document.getElementById("mapContainer").addEventListener("click", (e) => {
        // í´ë¦­ëœ ìš”ì†Œê°€ subwayPopup ìì²´ì´ê±°ë‚˜ ê·¸ ìì‹ ìš”ì†Œê°€ ì•„ë‹ˆë¼ë©´ ë‹«ìŠµë‹ˆë‹¤.
        if (subwayPopup.style.display === "block" && !subwayPopup.contains(e.target) && e.target !== subwayBtn && !subwayBtn.contains(e.target)) {
             subwayPopup.style.display = "none";
        }
    });

    /* â–²â–²â–² [ì¶”ê°€] ë â–²â–²â–² */
};
document.head.appendChild(script);
</script>
</body>
</html>












