<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë°ìŠ¤í¬íƒ‘ ì „ìš© ì§€ë„</title>
    <style>
        /* ì „ì²´ ë° ë ˆì´ì•„ì›ƒ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Malgun Gothic', sans-serif;
            overflow: hidden;
        }
        #container {
            display: flex; /* ê°€ë¡œ ë°°ì—´ ìœ ì§€ */
            width: 100vw;
            height: 100vh;
        }

/* [ìˆ˜ì •] ìµœì¢Œì¸¡ íŒ¨ë„: í°ìƒ‰ ë°°ê²½ìœ¼ë¡œ ë³€ê²½ ë° ê²½ê³„ì„  ì¶”ê°€ */
#gnb {
    width: 64px;
    height: 100%;
    background-color: #ffffff; /* í°ìƒ‰ ë°°ê²½ */
    border-right: 1px solid #e0e0e0; /* êµ¬ë¶„ì„  ì¶”ê°€ */
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
    z-index: 1100;
}

/* ë¡œê³  ì˜ì—­ ì»¤ì„œ ì¶”ê°€ */
.gnb-logo {
    padding: 20px 0;
    width: 100%;
    display: flex;
    justify-content: center;
    cursor: pointer; /* í´ë¦­ ê°€ëŠ¥í•˜ë‹¤ëŠ” í‘œì‹œ */
}

.gnb-logo img {
    width: 40px;
    height: auto;
}

/* [ìˆ˜ì •] ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë³€ê²½ (í°ìƒ‰ ë°°ê²½ì— ë§ì¶° ì–´ë‘¡ê²Œ) */
.gnb-btn {
    background: none;
    border: none;
    padding: 20px 0;
    color: #333333; /* ê¸€ììƒ‰ ì§„í•˜ê²Œ */
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 20px; /* ì•„ì´ì½˜ í¬ê¸° ì‚´ì§ í‚¤ì›€ */
    transition: background 0.2s;
    width: 100%;
}

.gnb-btn:hover {
    background-color: #f5f5f5; /* í˜¸ë²„ ì‹œ ë°ì€ íšŒìƒ‰ */
}

.btn-text {
    font-size: 11px;
    margin-top: 6px;
    font-weight: 600;
    color: #555;
}

        /* ì™¼ìª½ ì‚¬ì´ë“œë°”: ê¸°ì¡´ ë””ìì¸ ìœ ì§€ */
        #sidebar {
            width: 20%;
            min-width: 260px;
            max-width: 420px;
            height: 100%;
            box-sizing: border-box;
            background: #fafafa;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
        }

        /* ê²€ìƒ‰ì˜ì—­ */
        #searchArea {
            padding: 14px;
            border-bottom: 1px solid #eee;
            background: #fff;
        }
#searchInput {
    width: 100%;
    height: 42px;
    padding: 0 12px;
    border-radius: 8px;
    border: 3px solid #444; /* ê¸°ì¡´ 1px -> 3px, ìƒ‰ìƒ ì§„íšŒìƒ‰ */
    font-size: 15px;
    box-sizing: border-box;
    font-weight: bold; /* í…Œë‘ë¦¬ì— ë§ì¶° ê¸€ì”¨ë„ ì•½ê°„ ê°•ì¡° */
}

        #buildingList {
            padding: 10px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            flex: 1 1 auto;
        }

        .building-card {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            padding: 10px;
            border-radius: 8px;
            background: white;
            margin-bottom: 10px;
            cursor: pointer;
            border: 1px solid #f0f0f0;
            transition: box-shadow .12s, transform .08s;
        }
        .building-card:hover {
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }
        .building-thumb {
            width: 72px;
            height: 72px;
            object-fit: cover;
            border-radius: 6px;
            flex-shrink: 0;
            background: #f3f4f6;
        }
        .building-info {
            flex: 1 1 auto;
        }
        .building-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 6px;
            color: #111827;
        }
        .building-meta {
            font-size: 13px;
            color: #6b7280;
            line-height: 1.25;
        }

        /* ì‹¤ë‚´ëª¨ë“œ ì •ë³´ íŒ¨ë„ */
        #indoorInfoPanel {
            padding: 14px;
            display: none;
            overflow-y: auto;
        }
        #indoorInfoPanel img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        #indoorInfoPanel .title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 8px;
            color: #111827;
        }
        #indoorInfoPanel .meta {
            font-size: 14px;
            color: #444;
            margin-bottom: 4px;
        }
        #indoorInfoPanel .section-title {
            margin-top: 18px;
            font-weight: 700;
            font-size: 15px;
            color: #1f2e6a;
            margin-bottom: 8px;
        }
        #indoorInfoPanel .facility-item {
            font-size: 14px;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        /* ì˜¤ë¥¸ìª½ ì§€ë„ ì˜ì—­: ê¸°ì¡´ ë””ìì¸ ìœ ì§€ ë° ë‚¨ì€ ê³µê°„ ì°¨ì§€ */
        #mapContainer {
            flex-grow: 1; 
            height: 100%;
            position: relative;
        }
        #map {
            width: 100%;
            height: 100%;
        }

        /* coordDisplay */
        #coordDisplay {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2500;
            background: rgba(255,255,255,0.95);
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            font-size: 14px;
            color: #111827;
            white-space: nowrap;
            max-width: 66%;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            align-items: center;
        }

        /* ì§€ë„ ìœ„ ë²„íŠ¼ */
        .map-btn-circle {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #ffffff;
            border: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.12);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2200;
        }
        #geolocationBtn {
            position: absolute;
            bottom: 18px;
            left: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: #fff;
            border: 1px solid #ccc;
        }

        #geolocationBtn .geo-icon {
            display: block;
            width: 18px;
            height: 18px;
            border: 2px solid #333; 
            border-radius: 50%;
            position: relative;
            box-sizing: border-box;
        }

        #geolocationBtn .geo-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
            background-color: #333; 
            border-radius: 50%;
        }

        #geolocationBtn.active .geo-icon {
            border: none;
            background-color: transparent;
            width: 0; height: 0;
            transform: rotate(-45deg);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 12px solid #007bff;
        }

        #geolocationBtn.active .geo-icon::after { content: none; }

        #floorControls {
            position: absolute;
            bottom: 86px;
            left: 18px;
            display: none;
            flex-direction: column-reverse;
            gap: 10px;
            z-index: 2200;
        }

        /* ë°˜ì‘í˜• ìµœì†Œí™” */
        @media (max-width: 920px) {
            #sidebar { display: none; }
        }
    </style>
</head>

<body>
<div id="container">

<nav id="gnb">
    <div class="gnb-logo" id="mainLogoBtn">
        <img src="https://raw.githubusercontent.com/candream99/disabledmap/main/pc/name2.png" alt="ë¡œê³ ">
    </div>
    
    <div class="gnb-menu">
        <button class="gnb-btn">
            â„¹ï¸<span class="btn-text">ì†Œê°œ</span>
        </button>
        <button class="gnb-btn">
            ğŸš‡<span class="btn-text">ì§€í•˜ì² </span>
        </button>
        <button class="gnb-btn">
            ğŸ“„<span class="btn-text">ì´ìš©ì•½ê´€</span>
        </button>
    </div>
</nav>

    <aside id="sidebar">
        <div id="searchArea">
            <input id="searchInput" type="text" placeholder="ê²€ìƒ‰â€¦">
        </div>
        <div id="buildingList"></div>
        <div id="indoorInfoPanel"></div>
    </aside>

    <section id="mapContainer">
        <div id="map"></div>
        <div id="coordDisplay">ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”</div>
        <button id="geolocationBtn" class="map-btn-circle">
            <span class="geo-icon"></span>
        </button>
        <div id="floorControls"></div>
    </section>

</div>

<script>
/* ê¸°ì¡´ JavaScript ë¡œì§ ì „ì²´ ë³µì‚¬ (ë°ì´í„° í¬í•¨) */
var NCP_KEY_ID = "q1d23mmkof";
var script = document.createElement("script");
script.src = "https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId="+NCP_KEY_ID+"&vmode=3";

script.onload = function() {

    /* DOM */
    const searchArea = document.getElementById("searchArea");
    const buildingList = document.getElementById("buildingList");
    const searchInput = document.getElementById("searchInput");
    const indoorInfoPanel = document.getElementById("indoorInfoPanel");

    const floorControls = document.getElementById("floorControls");
    const coordDisplay = document.getElementById("coordDisplay");
    const geolocationBtn = document.getElementById("geolocationBtn");

    /* ì§€ë„ ìƒì„± */
    var map = new naver.maps.Map("map", {
        center: new naver.maps.LatLng(37.5710, 126.9784),
        zoom: 17,
        zoomControl: false,
        mapTypes: new naver.maps.MapTypeRegistry({
            normal: naver.maps.NaverStyleMapTypeOptions.getVectorMap(),
        }),
    });
    var labelLayer = new naver.maps.LabelLayer();
    labelLayer.setMap(map);

    var groundOverlay = null;
    var currentBuildingId = null;
    var currentPositionMarker = null;

    /* ì‹¤ë‚´ëª¨ë“œ ì‹œ ì™¼ìª½ íŒ¨ë„ì„ ì •ë³´ íŒ¨ë„ë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ */
    function showIndoorInfo(buildingId) {
        const b = buildings[buildingId];
        indoorInfoPanel.innerHTML = `
            <img src="${b.buildingInfo.image_url}">
            <div class="title">${b.buildingInfo.name}</div>
            <div class="meta">ğŸ ï¸ ${b.buildingInfo.address}</div>
            <div class="meta">â—´ ${b.buildingInfo.operating_hours}</div>
            <div class="section-title">ë¬´ì¥ì•  ì‹œì„¤ ì •ë³´</div>
            ${Object.entries(b.accessInfo).map(([k,v]) => `
                <div class="facility-item"><span>â€¢ ${k}</span><span>${v?'ìˆìŒ':'ì—†ìŒ'}</span></div>
            `).join("")}
        `;
    }

    /* ì‹¤ë‚´ëª¨ë“œ ì§„ì… */
    function enterIndoorMode(buildingId){
        currentBuildingId = buildingId;
        searchArea.style.display = "none";
        buildingList.style.display = "none";
        indoorInfoPanel.style.display = "block";
        showIndoorInfo(buildingId);

        const config = buildings[buildingId];
        const bounds = new naver.maps.LatLngBounds();
        config.polygonCoords.forEach(c=>bounds.extend(c));
        map.setCenter(bounds.getCenter());
        map.setZoom(19);

        labelLayer.setMap(null);
        coordDisplay.textContent = "ì¼ë°˜ì§€ë„ë¡œ ëŒì•„ê°€ë ¤ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ í´ë¦­í•˜ì„¸ìš”";
        renderFloorButtons(buildingId);
        floorControls.style.display = "flex";
        showFloor(buildingId, config.currentFloor || "1f");

        for (let id in buildings){
            if (id !== buildingId && buildings[id].polygon){
                buildings[id].polygon.setMap(null);
            }
        }
    }

    /* ì‹¤ë‚´ëª¨ë“œ ì¢…ë£Œ */
    function exitIndoorMode(){
        if (!currentBuildingId) return;
        if (groundOverlay) groundOverlay.setMap(null);
        labelLayer.setMap(map);
        currentBuildingId = null;
        searchArea.style.display = "block";
        buildingList.style.display = "block";
        indoorInfoPanel.style.display = "none";
        floorControls.style.display = "none";
        coordDisplay.textContent = "ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”";
        for (let id in buildings){
            if (buildings[id].polygon){
                buildings[id].polygon.setMap(map);
                buildings[id].polygon.setOptions({ fillColor:"transparent" });
            }
        }
    }

    function showFloor(buildingId, floor){
        const b = buildings[buildingId];
        if (groundOverlay) groundOverlay.setMap(null);
        const img = b.images[floor];
        const bound = b.floorBounds[floor];
        groundOverlay = new naver.maps.GroundOverlay(img, bound, {
            map: map, clickable: true, opacity: 1
        });
        b.currentFloor = floor;
        document.querySelectorAll("#floorControls .floor-btn").forEach(btn=>{
            btn.classList.remove("active");
        });
        const btn = document.querySelector(`#floorControls .floor-btn[data-floor="${floor}"]`);
        if (btn) btn.classList.add("active");
        naver.maps.Event.addListener(groundOverlay,"click",(e)=>{
            e.stopOverlays = true;
            exitIndoorMode();
        });
    }

    function renderFloorButtons(buildingId){
        floorControls.innerHTML = "";
        const b = buildings[buildingId];
        b.floors.forEach(f=>{
            const btn = document.createElement("button");
            btn.className = "floor-btn map-btn-circle";
            btn.dataset.floor = f;
            btn.textContent = f.toUpperCase();
            btn.addEventListener("click", ()=> showFloor(buildingId,f));
            floorControls.prepend(btn);
        });
    }

    /* ì§€ì˜¤ë¡œì¼€ì´ì…˜ */
    geolocationBtn.addEventListener("click",function(){
        if (this.classList.contains("active")){
            if (currentPositionMarker) currentPositionMarker.setMap(null);
            this.classList.remove("active");
            return;
        }
        if (navigator.geolocation){
            navigator.geolocation.getCurrentPosition(pos=>{
                const c = new naver.maps.LatLng(pos.coords.latitude,pos.coords.longitude);
                map.setCenter(c);
                map.setZoom(17);
                if (currentPositionMarker) currentPositionMarker.setMap(null);
                currentPositionMarker = new naver.maps.Marker({ map: map, position: c });
                geolocationBtn.classList.add("active");
            });
        }
    });

   /* ë¹Œë”© ë°ì´í„° ì •ì˜ (ì „ì²´ í†µí•©) */
    const buildings = {
        ky: { // êµë³´ë¹Œë”©
            buildingInfo: {
                name: "êµë³´ë¹Œë”©",
                image_url: "https://raw.githubusercontent.com/candream99/disabledmap/main/kb/kyobo_gwanghwamun.jpg",
                address: "ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 1",
                operating_hours: "09:00 - 18:00"
            },
            accessInfo: {"ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ":true,"ì¥ì• ì¸ í™”ì¥ì‹¤":false,"ì¥ì• ì¸ ì£¼ì°¨ì¥":true,"ì—˜ë¦¬ë² ì´í„°":true,"ì£¼ì¶œì…êµ¬ ë‹¨ì°¨":false},
            floors: ["b1","1f","2f"], currentFloor: "1f",
            images: {"b1":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/kb_b111.png","1f":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/ky11.png","2f":"https://raw.githubusercontent.com/candream99/disabledmap/main/kb/ky_1.jpg"},
            floorBounds: {
                "b1":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.571590,126.978531),new naver.maps.LatLng(37.570465,126.977552)),
                "1f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570512,126.977632),new naver.maps.LatLng(37.571415,126.978244)),
                "2f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570512,126.977632),new naver.maps.LatLng(37.571415,126.978244)),
            },
            polygonCoords:[new naver.maps.LatLng(37.571350,126.977670),new naver.maps.LatLng(37.571360,126.978059),new naver.maps.LatLng(37.571275,126.978063),new naver.maps.LatLng(37.571275,126.978173),new naver.maps.LatLng(37.570870,126.978184),new naver.maps.LatLng(37.570872,126.978082),new naver.maps.LatLng(37.570543,126.978094),new naver.maps.LatLng(37.570539,126.977702)]
        },
        dt: { // ê´‘í™”ë¬¸ Díƒ€ì›Œ
            buildingInfo:{name:'ê´‘í™”ë¬¸ Díƒ€ì›Œ',image_url:'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/d_tower.jpg',address:'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ3ê¸¸ 17',operating_hours:'10:00 - 21:00'},
            accessInfo:{'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ':false,'ì¥ì• ì¸ í™”ì¥ì‹¤':true,'ì¥ì• ì¸ ì£¼ì°¨ì¥':false,'ì—˜ë¦¬ë² ì´í„°':true,'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨':true},
            floors:['b4','1f'], currentFloor:'1f',
            images:{'b4':'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/dt_b4.png','1f':'https://raw.githubusercontent.com/candream99/disabledmap/main/dt/dt1.png'},
            floorBounds:{"b4":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570459,126.978649),new naver.maps.LatLng(37.571626,126.979210)),"1f":new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570459,126.978649),new naver.maps.LatLng(37.571626,126.979210))},
            polygonCoords:[new naver.maps.LatLng(37.571470,126.978762),new naver.maps.LatLng(37.571476,126.979161),new naver.maps.LatLng(37.570627,126.979181),new naver.maps.LatLng(37.570557,126.979117),new naver.maps.LatLng(37.570553,126.978777)]
        },
        t8: { // íƒ€ì›Œ8
            polygonCoords: [
                new naver.maps.LatLng(37.570859, 126.980318),
                new naver.maps.LatLng(37.570854, 126.980784),
                new naver.maps.LatLng(37.570515, 126.980785),
                new naver.maps.LatLng(37.570514, 126.980841),
                new naver.maps.LatLng(37.570417, 126.980840),
                new naver.maps.LatLng(37.570418, 126.980288),
                new naver.maps.LatLng(37.570518, 126.980287),
                new naver.maps.LatLng(37.570518, 126.980315),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_b2.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/T8_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570405, 126.980209), new naver.maps.LatLng(37.570902, 126.981077)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': true, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'íƒ€ì›Œ8',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/T8/t88.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ5ê¸¸ 7',
                operating_hours: '09:00 - 22:00 (ì£¼ë§ í¬í•¨)'
            }
        },
        dp: { // ë•ìˆ˜ê¶ ë””íŒ°ë¦¬ìŠ¤
            polygonCoords: [
                new naver.maps.LatLng(37.568747, 126.971657),
                new naver.maps.LatLng(37.568764, 126.971716),
                new naver.maps.LatLng(37.568785, 126.971707),
                new naver.maps.LatLng(37.568924, 126.972264),
                new naver.maps.LatLng(37.568905, 126.972278),
                new naver.maps.LatLng(37.568918, 126.972331),
                new naver.maps.LatLng(37.568654, 126.972437),
                new naver.maps.LatLng(37.568638, 126.972382),
                new naver.maps.LatLng(37.568619, 126.972390),
                new naver.maps.LatLng(37.568479, 126.971828),
                new naver.maps.LatLng(37.568501, 126.971818),
                new naver.maps.LatLng(37.568483, 126.971760),
            ],
            floors: ['1f', 'b1', 'b3'],
            images: {
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_2.png',
                'b3': 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp_3.png',
            },
            floorBounds: { 
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568384, 126.971603), new naver.maps.LatLng(37.569001, 126.972464)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568245, 126.971606), new naver.maps.LatLng(37.569161, 126.972561)),
                'b3': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.568245, 126.971606), new naver.maps.LatLng(37.569161, 126.972561)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': true, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'ë•ìˆ˜ê¶ ë””íŒ°ë¦¬ìŠ¤',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/dp/dp.png',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ2ê¸¸ 10',
                operating_hours: '09:00 - 21:00 (ë§¤ì¼ ìš´ì˜)'
            }
        },
        officia: { // ê´‘í™”ë¬¸ ì˜¤í”¼ì‹œì•„
            polygonCoords: [
                new naver.maps.LatLng(37.569884, 126.974610),
                new naver.maps.LatLng(37.569882, 126.975265),
                new naver.maps.LatLng(37.569580, 126.975261),
                new naver.maps.LatLng(37.569581, 126.974603),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_b1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_1f.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569519, 126.974473), new naver.maps.LatLng(37.569976, 126.975331)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'ê´‘í™”ë¬¸ ì˜¤í”¼ì‹œì•„',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/officia/officia_.jpg',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ 92',
                operating_hours: '10:00 - 21:00 (ì£¼ë§ íœ´ë¬´, ì„ì˜)'
            }
        },
        st: { // Síƒ€ì›Œ
            polygonCoords: [
                new naver.maps.LatLng(37.569910, 126.973684),
                new naver.maps.LatLng(37.569904, 126.974217),
                new naver.maps.LatLng(37.569688, 126.974214),
                new naver.maps.LatLng(37.569688, 126.973680),
            ],
            floors: ['b2', 'b1', '1f'],
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_b1.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_b1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/st_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569473, 126.973510), new naver.maps.LatLng(37.569981, 126.974348)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: {
                name: 'Síƒ€ì›Œ',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/st/s_t.jpg',
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ìƒˆë¬¸ì•ˆë¡œ 82',
                operating_hours: 'í‰ì¼ 09:00 - 21:00 (ì„ì˜)'
            }
        },
        yp: { // ì˜í’ë¹Œë”©
            polygonCoords: [
                new naver.maps.LatLng(37.569881, 126.981938),
                new naver.maps.LatLng(37.569879, 126.982329),
                new naver.maps.LatLng(37.569829, 126.982332),
                new naver.maps.LatLng(37.569828, 126.982395),
                new naver.maps.LatLng(37.569780, 126.982395),
                new naver.maps.LatLng(37.569777, 126.982463),
                new naver.maps.LatLng(37.569463, 126.982461),
                new naver.maps.LatLng(37.569462, 126.982068),
                new naver.maps.LatLng(37.569565, 126.981938),
            ],
            floors: ['b1', '1f'],
            images: {
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp1.png',
            },
            floorBounds: { 
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569438, 126.981870), new naver.maps.LatLng(37.569943, 126.982556)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569438, 126.981870), new naver.maps.LatLng(37.569943, 126.982556)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': true},
            buildingInfo: { 
                name: 'ì˜í’ë¹Œë”©', 
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/yp/yp_i.jpg', 
                address: 'ì„œìš¸ ì¢…ë¡œêµ¬ ì²­ê³„ì²œë¡œ 41', 
                operating_hours: '09:00 - 22:00'
            }
        },
        sc: { // SCì œì¼ì€í–‰
            polygonCoords: [
                new naver.maps.LatLng(37.571274, 126.982109),
                new naver.maps.LatLng(37.571257, 126.982778),
                new naver.maps.LatLng(37.570935, 126.982765),
                new naver.maps.LatLng(37.570934, 126.982725),
                new naver.maps.LatLng(37.570863, 126.982721),
                new naver.maps.LatLng(37.570672, 126.982456),
                new naver.maps.LatLng(37.570674, 126.982384),
                new naver.maps.LatLng(37.570612, 126.982302),
                new naver.maps.LatLng(37.570616, 126.982153),
                new naver.maps.LatLng(37.570712, 126.982050),
                new naver.maps.LatLng(37.570974, 126.982058),
                new naver.maps.LatLng(37.570969, 126.982094),
            ],
            floors: ['b1', '1f'],
            images: {
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_1.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_1.png',
            },
            floorBounds: { 
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570605, 126.981884), new naver.maps.LatLng(37.571639, 126.982899)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.570605, 126.981884), new naver.maps.LatLng(37.571639, 126.982899)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': false, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': false},
            buildingInfo: { 
                name: 'SCì œì¼ì€í–‰', 
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/sc/sc_i.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 47', 
                operating_hours: '09:00 - 16:30'
            }
        },
        ks: { // í•œêµ­ë¬´ì—­ë³´í—˜ê³µì‚¬
            polygonCoords: [
                new naver.maps.LatLng(37.569913, 126.978610),
                new naver.maps.LatLng(37.569910, 126.979151),
                new naver.maps.LatLng(37.569719, 126.979148),
                new naver.maps.LatLng(37.569722, 126.978609) 
            ],
            floors: ['b2', 'b1', '1f'], 
            images: {
                'b2': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_b12.png',
                'b1': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_b11.png',
                '1f': 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks_1.png',
            },
            floorBounds: { 
                'b2': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569583, 126.978495), new naver.maps.LatLng(37.570013, 126.979220)),
                'b1': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569583, 126.978495), new naver.maps.LatLng(37.570013, 126.979220)),
                '1f': new naver.maps.LatLngBounds(new naver.maps.LatLng(37.569618, 126.978522), new naver.maps.LatLng(37.570012, 126.979214)),
            },
            currentFloor: '1f',
            accessInfo: {'ì£¼ì¶œì…êµ¬ ê²½ì‚¬ë¡œ': true, 'ì¥ì• ì¸ í™”ì¥ì‹¤': false, 'ì¥ì• ì¸ ì£¼ì°¨ì¥': true, 'ì—˜ë¦¬ë² ì´í„°': true, 'ì£¼ì¶œì…êµ¬ ë‹¨ì°¨': true},
            buildingInfo: {
                name: 'í•œêµ­ë¬´ì—­ë³´í—˜ê³µì‚¬',
                image_url: 'https://raw.githubusercontent.com/candream99/disabledmap/main/ks/ks.jpg', 
                address: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ 14',
                operating_hours: '09:00 - 18:00'
            }
        }
    };
    /* í´ë¦¬ê³¤ ìƒì„± ë¡œì§ */
    for (let id in buildings) {
        const b = buildings[id];
        b.polygon = new naver.maps.Polygon({
            map: map,
            paths: b.polygonCoords,
            fillColor: "transparent",
            fillOpacity: 0.3,
            strokeColor: "#1f2e6a",
            strokeOpacity: 0.6,
            strokeWeight: 3,
            clickable: true
        });
        naver.maps.Event.addListener(b.polygon, "click", () => enterIndoorMode(id));
        naver.maps.Event.addListener(b.polygon, "mouseover", () => b.polygon.setOptions({ fillColor: "#1f2e6a" }));
        naver.maps.Event.addListener(b.polygon, "mouseout", () => b.polygon.setOptions({ fillColor: "transparent" }));
    }

    /* ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ */
function renderList(q) {
    const arr = Object.keys(buildings).map(id => ({ id, info: buildings[id].buildingInfo }));
    buildingList.innerHTML = arr.filter(x => {
        if (!q) return true;
        return x.info.name.toLowerCase().includes(q.toLowerCase());
    }).map(x => `
        <div class="building-card" data-id="${x.id}">
            <img class="building-thumb" src="${x.info.image_url}">
            <div class="building-info">
                <div class="building-name">${x.info.name}</div>
                <div class="building-meta">ğŸ ï¸ ${x.info.address}</div>
                <div class="building-meta">â—´ ${x.info.operating_hours}</div>
            </div>
        </div>
    `).join("");

    document.querySelectorAll(".building-card").forEach(el => {
        el.onclick = () => enterIndoorMode(el.dataset.id);
    });
}

    renderList("");
    searchInput.oninput = () => renderList(searchInput.value);
    /* [ì¶”ê°€] ë¡œê³  í´ë¦­ ì‹œ ì´ˆê¸°í™” (ì²« í˜ì´ì§€ë¡œ ë³µê·€) */
    document.getElementById("mainLogoBtn").addEventListener("click", function() {
        if (currentBuildingId) {
            exitIndoorMode();
        }
        searchInput.value = "";
        renderList("");
        map.setCenter(new naver.maps.LatLng(37.5710, 126.9784));
        map.setZoom(17);
        coordDisplay.textContent = "ê±´ë¬¼ì„ í´ë¦­í•˜ë©´ ì‹¤ë‚´ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”";
        
        if (currentPositionMarker) {
            currentPositionMarker.setMap(null);
            currentPositionMarker = null;
            geolocationBtn.classList.remove("active");
        }
    });

    /* â–²â–²â–²â–²â–² ë¶™ì—¬ë„£ê¸° ë â–²â–²â–²â–²â–² */
};
document.head.appendChild(script);
</script>
</body>
</html>



